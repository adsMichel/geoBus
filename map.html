<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
        #map {
            width: 100vw;
            height: 100vh;
            margin: 0;
            padding: 8px;
        }
        #map iframe {
            width: 100%;
            height: 100%;
            border: 0;
            display: block;
        }
    </style>
</head>
<body>
    <div id="map">
    </div>

    <script>
        const DESTINATION_LAT = -15.805608; // Latitude do local alvo
        const DESTINATION_LON = -48.0799134;  // Longitude do local alvo
        const PROXIMITY_RADIUS_METERS = 200; // Raio de proximidade (em metros)

        // Fator de convers√£o (aproximado) para transformar graus em metros
        // A cada 1 grau de latitude/longitude (no equador) ~ 111.320 metros.
        // Usamos um valor aproximado para a √°rea de interesse: 1 grau de latitude √© ~111.000 metros.
        const METERS_PER_DEGREE = 111000;

        /**
         * Fun√ß√£o para calcular uma dist√¢ncia aproximada (em metros) usando o Teorema de Pit√°goras
         * em coordenadas planas (m√©todo r√°pido para pequenas dist√¢ncias).
         * @param {number} lat1 - Latitude do Ponto 1.
         * @param {number} lon1 - Longitude do Ponto 1.
         * @param {number} lat2 - Latitude do Ponto 2 (Destino).
         * @param {number} lon2 - Longitude do Ponto 2 (Destino).
         * @returns {number} A dist√¢ncia aproximada em metros.
         */
        function calculateApproximateDistance(lat1, lon1, lat2, lon2) {
            // Diferen√ßa na Latitude e Longitude
            const dLat = lat2 - lat1;
            const dLon = lon2 - lon1;

            // Converta a diferen√ßa em graus para metros (aproximado)
            const dLatMeters = dLat * METERS_PER_DEGREE;
            // Multiplicador do cosseno para corrigir a dist√¢ncia de longitude √† medida que se afasta do equador
            // Math.cos(lat1 * Math.PI / 180) -> Converte latitude em radianos para o c√°lculo do cosseno
            const dLonMeters = dLon * METERS_PER_DEGREE * Math.cos(lat1 * Math.PI / 180);

            // Aplica o Teorema de Pit√°goras: a^2 + b^2 = c^2 (ou sqrt(a^2 + b^2) = c)
            const distance = Math.sqrt(dLatMeters * dLatMeters + dLonMeters * dLonMeters);
            
            return distance;
        }

        // Fun√ß√£o principal para obter a geolocaliza√ß√£o
        navigator.geolocation.getCurrentPosition(position => {
            const { latitude, longitude } = position.coords;
            console.log(`Posi√ß√£o Atual: Lat ${latitude}, Lon ${longitude}`);

            // 2. Calcule a dist√¢ncia at√© o destino
            const distanceInMeters = calculateApproximateDistance(
                latitude,
                longitude,
                DESTINATION_LAT,
                DESTINATION_LON
            );

            console.log(`Dist√¢ncia at√© o destino: ${distanceInMeters.toFixed(2)} metros`);

            // 3. Verifique se est√° pr√≥ximo
            if (distanceInMeters <= PROXIMITY_RADIUS_METERS) {
                // Emite o alerta se a dist√¢ncia for menor ou igual ao raio de proximidade
                alert(`ü•≥ Voc√™ est√° a APENAS ${distanceInMeters.toFixed(0)} metros de seu destino: Lat ${DESTINATION_LAT}, Lon ${DESTINATION_LON}!`);
            } else {
                console.log("Voc√™ ainda n√£o est√° dentro do raio de proximidade.");
            }



        navigator.geolocation.getCurrentPosition(position =>{
            const {latitude, longitude} = position.coords;
            console.log(latitude, longitude);
            
            // map.innerHTML = `<iframe width="600" height="450" src="https://maps.google.com/maps?q='+latitude+','+longitude+'&amp;z=15&amp;output=embed"></iframe>`;
            map.innerHTML = `<iframe src="https://maps.google.com/maps?q=${latitude},${longitude}&z=12&output=embed" height="500" width="600"></iframe>`;
        });
    </script>

    <!-- <script>
    // 1. Defina as Coordenadas de Destino e o Raio
    // EX: Coordenadas da Torre Eiffel em Paris
    const DESTINATION_LAT = -15.805608; // Latitude do local alvo
    const DESTINATION_LON = -48.0799134;  // Longitude do local alvo
    const PROXIMITY_RADIUS_METERS = 200; // Raio de proximidade (em metros)

    // Fator de convers√£o (aproximado) para transformar graus em metros
    // A cada 1 grau de latitude/longitude (no equador) ~ 111.320 metros.
    // Usamos um valor aproximado para a √°rea de interesse: 1 grau de latitude √© ~111.000 metros.
    const METERS_PER_DEGREE = 111000;

    /**
     * Fun√ß√£o para calcular uma dist√¢ncia aproximada (em metros) usando o Teorema de Pit√°goras
     * em coordenadas planas (m√©todo r√°pido para pequenas dist√¢ncias).
     * @param {number} lat1 - Latitude do Ponto 1.
     * @param {number} lon1 - Longitude do Ponto 1.
     * @param {number} lat2 - Latitude do Ponto 2 (Destino).
     * @param {number} lon2 - Longitude do Ponto 2 (Destino).
     * @returns {number} A dist√¢ncia aproximada em metros.
     */
    function calculateApproximateDistance(lat1, lon1, lat2, lon2) {
        // Diferen√ßa na Latitude e Longitude
        const dLat = lat2 - lat1;
        const dLon = lon2 - lon1;

        // Converta a diferen√ßa em graus para metros (aproximado)
        const dLatMeters = dLat * METERS_PER_DEGREE;
        // Multiplicador do cosseno para corrigir a dist√¢ncia de longitude √† medida que se afasta do equador
        // Math.cos(lat1 * Math.PI / 180) -> Converte latitude em radianos para o c√°lculo do cosseno
        const dLonMeters = dLon * METERS_PER_DEGREE * Math.cos(lat1 * Math.PI / 180);

        // Aplica o Teorema de Pit√°goras: a^2 + b^2 = c^2 (ou sqrt(a^2 + b^2) = c)
        const distance = Math.sqrt(dLatMeters * dLatMeters + dLonMeters * dLonMeters);
        
        return distance;
    }

    // Fun√ß√£o principal para obter a geolocaliza√ß√£o
    navigator.geolocation.getCurrentPosition(position => {
        const { latitude, longitude } = position.coords;
        console.log(`Posi√ß√£o Atual: Lat ${latitude}, Lon ${longitude}`);

        // 2. Calcule a dist√¢ncia at√© o destino
        const distanceInMeters = calculateApproximateDistance(
            latitude,
            longitude,
            DESTINATION_LAT,
            DESTINATION_LON
        );

        console.log(`Dist√¢ncia at√© o destino: ${distanceInMeters.toFixed(2)} metros`);

        // 3. Verifique se est√° pr√≥ximo
        if (distanceInMeters <= PROXIMITY_RADIUS_METERS) {
            // Emite o alerta se a dist√¢ncia for menor ou igual ao raio de proximidade
            alert(`ü•≥ Voc√™ est√° a APENAS ${distanceInMeters.toFixed(0)} metros de seu destino: Lat ${DESTINATION_LAT}, Lon ${DESTINATION_LON}!`);
        } else {
            console.log("Voc√™ ainda n√£o est√° dentro do raio de proximidade.");
        }

        // 4. C√≥digo para o Iframe (manter a funcionalidade de mapa original)
        // **ATEN√á√ÉO**: A URL que voc√™ forneceu para o iframe (https://maps.google.com/maps?q=$...) n√£o √© a URL correta/padr√£o do Google Maps Embed. 
        // A URL correta deve ser algo como: https://maps.google.com/maps?q=...
        // Mantenha o seu c√≥digo original, mas saiba que ele pode n√£o funcionar dependendo de como voc√™ est√° tentando exibir o mapa.
        const map = document.getElementById('map'); // Presume que voc√™ tem um elemento com id="map" no seu HTML
        if (map) {
             map.innerHTML = `<iframe src="https://maps.google.com/maps?q=$${latitude},${longitude}&z=12&output=embed" height="500" width="600"></iframe>`;
        }
    }, (error) => {
        // Fun√ß√£o de erro para caso a geolocaliza√ß√£o falhe (ex: usu√°rio n√£o permitiu)
        console.error("Erro ao obter a geolocaliza√ß√£o:", error);
    });
</script> -->
</body>
</html>